; generated by Component: ARM Compiler 5.06 update 6 (build 750) Tool: ArmCC [4d3637]
; commandline ArmCC [--list --split_sections --debug -c --asm --interleave -o.\stm3210b-eval\main.o --asm_dir=.\STM3210B-EVAL\ --list_dir=.\STM3210B-EVAL\ --depend=.\stm3210b-eval\main.d --cpu=Cortex-M3 --apcs=interwork -O3 --diag_suppress=9931 -I..\inc -I..\..\..\Libraries\CMSIS\Device\ST\STM32F10x\Include -I..\..\..\Libraries\STM32_USB-FS-Device_Driver\inc -I..\..\..\Libraries\STM32F10x_StdPeriph_Driver\inc -I..\..\..\Utilities\STM32_EVAL -I..\..\..\Utilities\STM32_EVAL\Common -I..\..\..\Utilities\STM32_EVAL\STM3210B_EVAL -ID:\Keil5\ARM\RV31\INC -ID:\Keil5\ARM\CMSIS\Include -ID:\Keil5\ARM\INC\ST\STM32F10x -D__MICROLIB -D__UVISION_VERSION=526 -DUSE_STDPERIPH_DRIVER -DSTM32F10X_MD -DUSE_STM3210B_EVAL --omf_browse=.\stm3210b-eval\main.crf ..\src\main.c]
                          THUMB

                          AREA ||i.main||, CODE, READONLY, ALIGN=2

                  main PROC
;;;59     *******************************************************************************/
;;;60     int main(void)
000000  f7fffffe          BL       DFU_Button_Config
;;;61     {
;;;62     
;;;63     #if defined (USE_STM32L152D_EVAL)
;;;64       FLASH_Unlock();
;;;65       FLASH_ClearFlag(FLASH_FLAG_OPTVERRUSR);
;;;66     #endif
;;;67       DFU_Button_Config();
;;;68     
;;;69       /* Check if the Key push-button on STM3210x-EVAL Board is pressed */
;;;70       if (DFU_Button_Read() != 0x00)
000004  f7fffffe          BL       DFU_Button_Read
;;;71       { /* Test if user code is programmed starting from address 0x8003000 */
;;;72         if (((*(__IO uint32_t*)ApplicationAddress) & 0x2FFE0000 ) == 0x20000000)
;;;73         { /* Jump to user application */
;;;74     
;;;75           JumpAddress = *(__IO uint32_t*) (ApplicationAddress + 4);
000008  4c0e              LDR      r4,|L1.68|
00000a  b168              CBZ      r0,|L1.40|
00000c  480e              LDR      r0,|L1.72|
00000e  6801              LDR      r1,[r0,#0]            ;72
000010  4a0e              LDR      r2,|L1.76|
000012  4011              ANDS     r1,r1,r2              ;72
000014  f1b15f00          CMP      r1,#0x20000000        ;72
000018  d106              BNE      |L1.40|
00001a  6841              LDR      r1,[r0,#4]
;;;76           Jump_To_Application = (pFunction) JumpAddress;
00001c  60a1              STR      r1,[r4,#8]  ; JumpAddress
;;;77           /* Initialize user application's Stack Pointer */
;;;78           __set_MSP(*(__IO uint32_t*) ApplicationAddress);
00001e  6061              STR      r1,[r4,#4]  ; Jump_To_Application
000020  6800              LDR      r0,[r0,#0]
000022  f3808808          MSR      MSP,r0
;;;79           Jump_To_Application();
000026  4788              BLX      r1
                  |L1.40|
;;;80         }
;;;81       } /* Otherwise enters DFU mode to allow user to program his application */
;;;82     
;;;83       /* Enter DFU mode */
;;;84       DeviceState = STATE_dfuERROR;
;;;85       DeviceStatus[0] = STATUS_ERRFIRMWARE;
000028  4906              LDR      r1,|L1.68|
00002a  200a              MOVS     r0,#0xa               ;84
00002c  310c              ADDS     r1,r1,#0xc
00002e  7020              STRB     r0,[r4,#0]            ;84
000030  7008              STRB     r0,[r1,#0]
;;;86       DeviceStatus[4] = DeviceState;
000032  7108              STRB     r0,[r1,#4]
;;;87     
;;;88       Set_System();
000034  f7fffffe          BL       Set_System
;;;89       Set_USBClock();
000038  f7fffffe          BL       Set_USBClock
;;;90       USB_Init();  
00003c  f7fffffe          BL       USB_Init
                  |L1.64|
;;;91       
;;;92       /* Main loop */
;;;93       while (1)
000040  e7fe              B        |L1.64|
;;;94       {}
;;;95     }
;;;96     
                          ENDP

000042  0000              DCW      0x0000
                  |L1.68|
                          DCD      ||.data||
                  |L1.72|
                          DCD      0x08003000
                  |L1.76|
                          DCD      0x2ffe0000

                          AREA ||.data||, DATA, ALIGN=2

                  DeviceState
000000  00000000          DCB      0x00,0x00,0x00,0x00
                  Jump_To_Application
                          DCD      0x00000000
                  JumpAddress
                          DCD      0x00000000
                  DeviceStatus
                          DCD      0x00000000
000010  0000              DCB      0x00,0x00

;*** Start embedded assembler ***

#line 1 "..\\src\\main.c"
	AREA ||.rev16_text||, CODE
	THUMB
	EXPORT |__asm___6_main_c_main____REV16|
#line 129 "D:\\Keil5\\ARM\\CMSIS\\Include\\core_cmInstr.h"
|__asm___6_main_c_main____REV16| PROC
#line 130

 rev16 r0, r0
 bx lr
	ENDP
	AREA ||.revsh_text||, CODE
	THUMB
	EXPORT |__asm___6_main_c_main____REVSH|
#line 144
|__asm___6_main_c_main____REVSH| PROC
#line 145

 revsh r0, r0
 bx lr
	ENDP

;*** End   embedded assembler ***

                  __ARM_use_no_argv EQU 0
